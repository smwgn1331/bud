ngx() {
    shift
    case "$1" in
        link|lin)
            shift
            local configFile="/etc/nginx/sites-available/$1"
            if [ -n "$configFile" ] && [ -e "$configFile" ]; then
                if sudo nginx -t; then
                    sudo ln -s "$configFile" "/etc/nginx/sites-enabled/$1"
                    bud ngx r
                fi
            else
                ngx_link_help
            fi
        ;;
        list|ls)
        case "$@" in  
            cfg) sudo ls /etc/nginx/sites-available ;; 
            link) sudo ls /etc/nginx/sites-enabled ;; 
            *) (ngx_h_header && ngx_list_detail_help) ;; esac
        ;;
        unlink|unli*)
            shift
            local configFile="/etc/nginx/sites-enabled/$1"
            if [ -n "$1" ] && [ -L "$configFile" ]; then
                sudo rm "$configFile"
                bud ngx r
            else
                echo "⚠️  Symlink '$configFile' tidak ditemukan."
            fi
        ;;
        rst|r*) sudo systemctl restart nginx ;;
        stp) sudo systemctl stop nginx ;;
        str) sudo systemctl start nginx ;;
        stt) sudo systemctl status nginx ;;
        tst|t*) sudo nginx -t ;;
        *) ngx_help
    esac
}

ngx_link_help() {
    echo -e " \e[33m- link\t\t\e[32mEnable NGINX config (file must exists)\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mlink <?ARGS>\e[0m"
}

ngx_list_help(){
    echo -e " \e[33m- list\t\t\e[32mList NGINX config (file must exists)\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mlist <?ARGS: cfg, link>\e[0m"
}

ngx_list_detail_help(){
    ngx_list_help
    echo -e "   \e[36margs:"
    echo -e "   \e[36m- cfg\t\e[32mlist configuration file"
    echo -e "   \e[36m- link\t\e[32mlist enabled configuration file\e[0m"
}

ngx_rst_help() {
    echo -e " \e[33m- rst\t\t\e[32mRestart service\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mrst\e[0m"
}

ngx_stp_help() {
    echo -e " \e[33m- stp\t\t\e[32mStop service\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mstp\e[0m"
}

ngx_str_help() {
    echo -e " \e[33m- str\t\t\e[32mStart service\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mstr\e[0m"
}

ngx_stt_help() {
    echo -e " \e[33m- stt\t\t\e[32mCheck for NGINX service status\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mstt\e[0m"
}

ngx_tst_help() {
    echo -e " \e[33m- tst\t\t\e[32mTest NGINX config files\e[0m"
    echo -e "   usage:\tbud \e[33mngx \e[36mstr\e[0m"
}

ngx_header_help(){
    echo -e "-------------------------------------------------------"
    echo -e " NGINX\t\t\e[32mManage Nginx\e[0m"
}

ngx_help(){
    ngx_header_help
    ngx_link_help
    ngx_list_help
    ngx_rst_help
    ngx_stp_help
    ngx_str_help
    ngx_stt_help
    ngx_tst_help
}